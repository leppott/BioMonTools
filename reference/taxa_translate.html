<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Taxa Translate — taxa_translate • BioMonTools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Taxa Translate — taxa_translate"><meta property="og:description" content="Convert user taxa names to those in an official project based
name list."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">BioMonTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.2.9014</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/vignette_BioMonTools.html">Vignette, BioMonTools</a>
    </li>
    <li>
      <a href="../articles/vignette_MapTaxaObs.html">Taxa Maps</a>
    </li>
    <li>
      <a href="../articles/vignette_NewIndex.html">Vignette, Adding a New Index</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/leppott/BioMonTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Taxa Translate</h1>
    <small class="dont-index">Source: <a href="https://github.com/leppott/BioMonTools/blob/HEAD/R/taxa_translate.R" class="external-link"><code>R/taxa_translate.R</code></a></small>
    <div class="hidden name"><code>taxa_translate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Convert user taxa names to those in an official project based
name list.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">taxa_translate</span><span class="op">(</span></span>
<span>  df_user <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  df_official <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  df_official_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  taxaid_user <span class="op">=</span> <span class="st">"TAXAID"</span>,</span>
<span>  taxaid_official_match <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  taxaid_official_project <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  taxaid_drop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  col_drop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sum_n_taxa_boo <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sum_n_taxa_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sum_n_taxa_group_by <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>df_user</dt>
<dd><p>User taxa data</p></dd>


<dt>df_official</dt>
<dd><p>Official project taxa data (master taxa list).</p></dd>


<dt>df_official_metadata</dt>
<dd><p>Metadata for offiical project taxa data.
Included
Default is NULL</p></dd>


<dt>taxaid_user</dt>
<dd><p>Taxonomic identifier in user data.  Default is "TAXAID".</p></dd>


<dt>taxaid_official_match</dt>
<dd><p>Taxonomic identifier in official data user to
match with user data.  This is not the project taxanomic identifier.</p></dd>


<dt>taxaid_official_project</dt>
<dd><p>Taxonomic identifier in official data that is
specific to a project, e.g., after operational taxonomic unit (OTU) applied.</p></dd>


<dt>taxaid_drop</dt>
<dd><p>Official taxonomic identifier that signals a record
should be dropped; e.g., DNI (Do Not Include) or -999.  Default = NULL</p></dd>


<dt>col_drop</dt>
<dd><p>Columns to remove in output.  Default = NULL</p></dd>


<dt>sum_n_taxa_boo</dt>
<dd><p>Boolean value for if the results should be summarized
Default = FALSE</p></dd>


<dt>sum_n_taxa_col</dt>
<dd><p>Column name for number of individuals for user data
when summarizing.  This column will be summed.
Default = NULL (suggestion = N_TAXA)</p></dd>


<dt>sum_n_taxa_group_by</dt>
<dd><p>Column names for user data to use for grouping the
data when summarizing the user data.  Suggestions are SAMPID and TAXA_ID.
Default = NULL</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with four elements.  The first (merge) is the user data frame
with additional columns from the official data appended to it.  Names from
the user data that overlap with the official data have the suffix '_User'.
The second element (nonmatch) of the list is a vector of the non-matching
taxa from the user data.  The third element (metadata) includes the
metadata for the official data (if provided).  The fourth element (unique) is
a data frame of the unique taxa names old and new.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Merges user file with official file.  The official file has
phylogeny, autecology, and other project specific fields.</p>
<p>The inputs for the function uses existing data frames (or tibbles).</p>
<p>Any fields that match between the user file and the official file the
official data column name have the 'official' version retained.</p>
<p>The 'col_drop' parameter can be used to remove unwanted columns; e.g.,
the other taxa id fields in the 'official' data file.</p>
<p>By default, taxa are not collapsed to the official taxaid.  That is, if
multiple taxa in a sample have the same name the rows will not be combined.
If collapsing is desired set the parameter `sum_n_taxa_boo` to TRUE.
Will also need to provide `sum_n_taxa_col` and `sum_n_taxa_group_by`.</p>
<p>Slightly different than `qc_taxa` since no options in `taxa_translate` for
using one field over another and is more generic.</p>
<p>The parameter `taxaid_drop` is used to drop records that matched to a new
name that should not be included in the results.  Examples include "999" or
"DNI" (Do Not Include).  Default is NULL so no action is taken.  "NA"s are
always removed.</p>
<p>The taxa list and metadata file names will be added to the results as two
new columns.</p>
<p>Another output is the unique taxa with old and new names.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1, PacNW</span></span></span>
<span class="r-in"><span><span class="co">## Input Parameters</span></span></span>
<span class="r-in"><span><span class="va">df_user</span> <span class="op">&lt;-</span> <span class="va">data_benthos_PacNW</span></span></span>
<span class="r-in"><span><span class="va">fn_official</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"BioMonTools"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                         , <span class="st">"taxa_official"</span></span></span>
<span class="r-in"><span>                         , <span class="st">"ORWA_TAXATRANSLATOR_20221219.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_official</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">fn_official</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn_official_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span></span></span>
<span class="r-in"><span>                                              , package <span class="op">=</span> <span class="st">"BioMonTools"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                                  , <span class="st">"taxa_official"</span></span></span>
<span class="r-in"><span>                      , <span class="st">"ORWA_ATTRIBUTES_METADATA_20221117.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_official_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">fn_official_metadata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">taxaid_user</span> <span class="op">&lt;-</span> <span class="st">"TaxaID"</span></span></span>
<span class="r-in"><span><span class="va">taxaid_official_match</span> <span class="op">&lt;-</span> <span class="st">"Taxon_orig"</span></span></span>
<span class="r-in"><span><span class="va">taxaid_official_project</span> <span class="op">&lt;-</span> <span class="st">"OTU_MTTI"</span></span></span>
<span class="r-in"><span><span class="va">taxaid_drop</span> <span class="op">&lt;-</span> <span class="st">"DNI"</span></span></span>
<span class="r-in"><span><span class="va">col_drop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Taxon_v2"</span>, <span class="st">"OTU_BCG_MariNW"</span><span class="op">)</span> <span class="co"># non desired ID cols in Official</span></span></span>
<span class="r-in"><span><span class="va">sum_n_taxa_boo</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="va">sum_n_taxa_col</span> <span class="op">&lt;-</span> <span class="st">"N_TAXA"</span></span></span>
<span class="r-in"><span><span class="va">sum_n_taxa_group_by</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"INDEX_NAME"</span>, <span class="st">"INDEX_CLASS"</span>, <span class="st">"SampleID"</span>, <span class="st">"TaxaID"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Run Function</span></span></span>
<span class="r-in"><span><span class="va">taxatrans</span> <span class="op">&lt;-</span> <span class="fu">taxa_translate</span><span class="op">(</span><span class="va">df_user</span></span></span>
<span class="r-in"><span>                               , <span class="va">df_official</span></span></span>
<span class="r-in"><span>                               , <span class="va">df_official_metadata</span></span></span>
<span class="r-in"><span>                               , <span class="va">taxaid_user</span></span></span>
<span class="r-in"><span>                               , <span class="va">taxaid_official_match</span></span></span>
<span class="r-in"><span>                               , <span class="va">taxaid_official_project</span></span></span>
<span class="r-in"><span>                               , <span class="va">taxaid_drop</span></span></span>
<span class="r-in"><span>                               , <span class="va">col_drop</span></span></span>
<span class="r-in"><span>                               , <span class="va">sum_n_taxa_boo</span></span></span>
<span class="r-in"><span>                               , <span class="va">sum_n_taxa_col</span></span></span>
<span class="r-in"><span>                               , <span class="va">sum_n_taxa_group_by</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> User taxa match, 221 / 223</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following user taxa (2/223) did not match the official taxa list:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Eukiefferiella coerulescens/claripennis groups</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Telmatodrilinae</span>
<span class="r-in"><span><span class="co">## View Results</span></span></span>
<span class="r-in"><span><span class="co"># View(taxatrans$merge)</span></span></span>
<span class="r-in"><span><span class="va">taxatrans</span><span class="op">$</span><span class="va">nonmatch</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           TaxaID N_Taxa_Sum N_Taxa_Count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Eukiefferiella coerulescens/claripennis groups          4            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                Telmatodrilinae          1            1</span>
<span class="r-in"><span><span class="co"># View(taxatrans$official_metadata)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#~~~~~</span></span></span>
<span class="r-in"><span><span class="co"># Example 2, Multiple Stages</span></span></span>
<span class="r-in"><span><span class="co"># Create data</span></span></span>
<span class="r-in"><span><span class="va">TAXAID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Agapetus"</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Zavrelimyia"</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">N_TAXA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">33</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">STAGE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"L"</span>,<span class="st">"P"</span>,<span class="st">"X"</span>,<span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_user</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">TAXAID</span>, <span class="va">N_TAXA</span>, <span class="va">STAGE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_user</span><span class="op">[</span>, <span class="st">"INDEX_NAME"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"BCG_MariNW_Bugs500ct"</span></span></span>
<span class="r-in"><span><span class="va">df_user</span><span class="op">[</span>, <span class="st">"INDEX_CLASS"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"HiGrad-HiElev"</span></span></span>
<span class="r-in"><span><span class="va">df_user</span><span class="op">[</span>, <span class="st">"SAMPLEID"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Test2023"</span></span></span>
<span class="r-in"><span><span class="va">df_user</span><span class="op">[</span>, <span class="st">"STATIONID"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Test"</span></span></span>
<span class="r-in"><span><span class="va">df_user</span><span class="op">[</span>, <span class="st">"DATE"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"2023-01-16"</span></span></span>
<span class="r-in"><span><span class="co">## Input Parameters</span></span></span>
<span class="r-in"><span><span class="va">fn_official</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"BioMonTools"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                         , <span class="st">"taxa_official"</span></span></span>
<span class="r-in"><span>                         , <span class="st">"ORWA_TAXATRANSLATOR_20221219.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_official</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">fn_official</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fn_official_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span></span></span>
<span class="r-in"><span>                                              , package <span class="op">=</span> <span class="st">"BioMonTools"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                                  , <span class="st">"taxa_official"</span></span></span>
<span class="r-in"><span>                                  , <span class="st">"ORWA_ATTRIBUTES_20221212.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df_official_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">fn_official_metadata</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">taxaid_user</span> <span class="op">&lt;-</span> <span class="st">"TAXAID"</span></span></span>
<span class="r-in"><span><span class="va">taxaid_official_match</span> <span class="op">&lt;-</span> <span class="st">"Taxon_orig"</span></span></span>
<span class="r-in"><span><span class="va">taxaid_official_project</span> <span class="op">&lt;-</span> <span class="st">"OTU_BCG_MariNW"</span></span></span>
<span class="r-in"><span><span class="va">taxaid_drop</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="va">col_drop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Taxon_v2"</span>, <span class="st">"OTU_MTTI"</span><span class="op">)</span> <span class="co"># non desired ID cols in Official</span></span></span>
<span class="r-in"><span><span class="va">sum_n_taxa_boo</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="va">sum_n_taxa_col</span> <span class="op">&lt;-</span> <span class="st">"N_TAXA"</span></span></span>
<span class="r-in"><span><span class="va">sum_n_taxa_group_by</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"INDEX_NAME"</span>, <span class="st">"INDEX_CLASS"</span>, <span class="st">"SAMPLEID"</span>, <span class="st">"TAXAID"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## Run Function</span></span></span>
<span class="r-in"><span><span class="va">taxatrans</span> <span class="op">&lt;-</span> <span class="fu">BioMonTools</span><span class="fu">::</span><span class="fu">taxa_translate</span><span class="op">(</span><span class="va">df_user</span></span></span>
<span class="r-in"><span>                                         , <span class="va">df_official</span></span></span>
<span class="r-in"><span>                                         , <span class="va">df_official_metadata</span></span></span>
<span class="r-in"><span>                                         , <span class="va">taxaid_user</span></span></span>
<span class="r-in"><span>                                      , <span class="va">taxaid_official_match</span></span></span>
<span class="r-in"><span>                                      , <span class="va">taxaid_official_project</span></span></span>
<span class="r-in"><span>                                      , <span class="va">taxaid_drop</span></span></span>
<span class="r-in"><span>                                      , <span class="va">col_drop</span></span></span>
<span class="r-in"><span>                                      , <span class="va">sum_n_taxa_boo</span></span></span>
<span class="r-in"><span>                                      , <span class="va">sum_n_taxa_col</span></span></span>
<span class="r-in"><span>                                      , <span class="va">sum_n_taxa_group_by</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> User taxa match, 2 / 2</span>
<span class="r-in"><span><span class="co">## View Results (before and after)</span></span></span>
<span class="r-in"><span><span class="va">df_user</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        TAXAID N_TAXA STAGE           INDEX_NAME   INDEX_CLASS SAMPLEID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Agapetus     33     A BCG_MariNW_Bugs500ct HiGrad-HiElev Test2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    Agapetus     33     L BCG_MariNW_Bugs500ct HiGrad-HiElev Test2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    Agapetus     33     P BCG_MariNW_Bugs500ct HiGrad-HiElev Test2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Zavrelimyia     50     X BCG_MariNW_Bugs500ct HiGrad-HiElev Test2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Zavrelimyia     50       BCG_MariNW_Bugs500ct HiGrad-HiElev Test2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   STATIONID       DATE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      Test 2023-01-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      Test 2023-01-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      Test 2023-01-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      Test 2023-01-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      Test 2023-01-16</span>
<span class="r-in"><span><span class="va">taxatrans</span><span class="op">$</span><span class="va">merge</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        TAXAID           INDEX_NAME   INDEX_CLASS SAMPLEID N_TAXA  Taxon_Group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Agapetus BCG_MariNW_Bugs500ct HiGrad-HiElev Test2023     99  Trichoptera</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Zavrelimyia BCG_MariNW_Bugs500ct HiGrad-HiElev Test2023    100 Chironomidae</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Taxon_v2 Changed            Rationale NonTarget    OTU_MTTI OTU_BCG_MariNW</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    Agapetus      no                          FALSE    Agapetus       Agapetus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Zavrelimyia      no Current Nomenclature     FALSE Zavrelimyia    Zavrelimyia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      TSN  Kingdom     Phylum SubPhylum   Class  SubClass       Order   SubOrder</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 117121 Animalia Arthropoda  Hexapoda Insecta Pterygota Trichoptera           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 128259 Animalia Arthropoda  Hexapoda Insecta Pterygota     Diptera Nematocera</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SuperFamily          Family   SubFamily        Tribe GenusGroup       Genus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             Glossosomatidae  Agapetinae                            Agapetus</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                Chironomidae Tanypodinae Pentaneurini            Zavrelimyia</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SubGenus SpeciesGroup SpeciesSubGroup SpeciesComplex Species Match_Official</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                                                        TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                                                        TRUE</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Erik W. Leppo.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

